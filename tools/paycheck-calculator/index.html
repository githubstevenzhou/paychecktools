<!DOCTYPE html>
<html lang="en">
<head>
  <script>
    fetch('/templates/head.html')
      .then(r => r.text())
      .then(html => document.head.insertAdjacentHTML('beforeend', html));
  </script>

  <title>Paycheck Calculator â€“ PaycheckTools</title>
  <meta name="description" content="Calculate your paycheck including gross pay, taxes, and net pay.">
  <link rel="canonical" href="https://paychecktools.com/tools/paycheck-calculator/">
  <link rel="stylesheet" href="/css/styles.css">

  <style>
    /* Skeleton å ä½æ ·å¼ */
    #site-header.skeleton, #site-footer.skeleton {
      background: #e0e0e0;
      min-height: 80px; /* å¯æ ¹æ®å®é™…é«˜åº¦è°ƒæ•´ */
      animation: pulse 1.5s infinite ease-in-out;
    }
    @keyframes pulse {
      0% { opacity: 0.6; }
      50% { opacity: 0.3; }
      100% { opacity: 0.6; }
    }
  </style>
</head>

<body>

  <!-- Header -->
  <div id="site-header" class="skeleton"></div>
  <script>
    fetch('/templates/header.html')
      .then(r => r.text())
      .then(html => {
        const el = document.getElementById('site-header');
        el.innerHTML = html;
        el.classList.remove('skeleton'); // ç§»é™¤å ä½æ ·å¼
      });
  </script>

  <main class="tool-container">

    <section class="calculator">
      <h1>Paycheck Calculator</h1>

      <label>Hourly Wage: <input id="wage" type="number" value="25"></label>
      <label>Hours Worked: <input id="hours" type="number" value="40"></label>
      <label>Overtime Hours: <input id="otHours" type="number" value="0"></label>
      <label>Federal Tax (%): <input id="taxFederal" type="number" value="12"></label>
      <label>State Tax (%): <input id="taxState" type="number" value="5"></label>
      <label>Pay Frequency:
        <select id="frequency">
          <option value="weekly" selected>Weekly</option>
          <option value="biweekly">Biweekly</option>
          <option value="semimonthly">Semimonthly</option>
          <option value="monthly">Monthly</option>
        </select>
      </label>

      <button id="calculateBtn" class="primary-btn">Calculate</button>

      <div id="output" class="result-box" style="display:none;">
        <p>Gross Pay: <span id="gross"></span></p>
        <p>Taxes: <span id="tax"></span></p>
        <p>Net Pay: <span id="net"></span></p>
      </div>
    </section>

    <!-- Feedback -->
    <section id="feedback-box" class="feedback-box" style="display:none;">
      <p><strong>Was this result helpful?</strong></p>
      <div class="feedback-actions">
        <button data-vote="yes">ğŸ‘ Yes</button>
        <button data-vote="no">ğŸ‘ No</button>
      </div>
      <div id="no-reason-box" style="display:none;">
        <p>Please tell us why:</p>
        <label><input type="radio" name="no-reason" value="wrong_calculation"> Calculation seems wrong</label>
        <label><input type="radio" name="no-reason" value="unclear_result"> Result is unclear</label>
        <label><input type="radio" name="no-reason" value="missing_option"> Missing option</label>
        <label><input type="radio" name="no-reason" value="ui_confusing"> UI is confusing</label>
        <button id="feedback-submit" class="secondary-btn">Submit Feedback</button>
      </div>
      <div id="feedback-status"></div>
    </section>

  </main>

  <!-- Footer -->
  <div id="site-footer" class="skeleton"></div>
  <script>
    fetch('/templates/footer.html')
      .then(r => r.text())
      .then(html => {
        const el = document.getElementById('site-footer');
        el.innerHTML = html;
        el.classList.remove('skeleton');
      });
  </script>

  <!-- æ ¸å¿ƒè®¡ç®—é€»è¾‘ -->
  <script src="/js/calculator-core.js"></script>

  <!-- Feedback JS -->
  <script src="/js/feedback.js"></script>

  <script>
    // Calculate æŒ‰é’®é€»è¾‘
    document.getElementById('calculateBtn').addEventListener('click', function () {
      const result = calculatePaycheck({
        wage: Number(document.getElementById('wage').value),
        hours: Number(document.getElementById('hours').value),
        otHours: Number(document.getElementById('otHours').value),
        frequency: document.getElementById('frequency').value,
        taxes: {
          federal: Number(document.getElementById('taxFederal').value),
          state: Number(document.getElementById('taxState').value)
        }
      });

      document.getElementById('gross').innerText = result.grossPay.toFixed(2);
      document.getElementById('tax').innerText = result.breakdown.taxAmount.toFixed(2);
      document.getElementById('net').innerText = result.netPay.toFixed(2);

      document.getElementById('output').style.display = 'block';

      // è§¦å‘ feedback æ˜¾ç¤º
      document.dispatchEvent(new Event('calculator:result-ready'));
    });
  </script>

</body>
</html>
